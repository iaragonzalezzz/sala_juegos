<div class="ranking-container">
  <div class="overlay">
    <h2>🏆 Ranking de Puntuaciones</h2>

    <!-- Selector de juego -->
    <div class="selector">
      <label for="juegoSelect">Seleccioná un juego:</label>
      <select id="juegoSelect" [(ngModel)]="juegoSeleccionado" (change)="filtrarJuego()">
        <option value="Todos">Todos</option>
        <option *ngFor="let juego of juegos" [value]="juego">{{ juego }}</option>
      </select>
    </div>

    <!-- Loading -->
    <div *ngIf="cargando" class="cargando">Cargando...</div>

    <!-- Rankings -->
    <ng-container *ngIf="!cargando">
      <div
        *ngFor="let juego of juegos"
        class="tabla-container"
        [hidden]="juegoSeleccionado !== 'Todos' && juegoSeleccionado !== juego"
      >
        <!-- 🎮 título del juego -->
        <h3>🎮 {{ juego }}</h3>

        <!-- Lista de resultados -->
        <ng-container *ngIf="resultadosPorJuego(juego) as lista">
          <table *ngIf="lista.length > 0">
            <thead>
              <tr>
                <th>#</th>
                <th>Jugador</th>
                <th>Puntaje</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let r of lista; let i = index" [appResaltarTop]="i + 1">
                <td>{{ i + 1 }}</td>
                <td>
                  {{ r.usuario }}
                  <div class="fecha">{{ r.fecha }}</div>
                </td>
                <td>
                  {{ r.puntaje }}
                </td>
              </tr>
            </tbody>
          </table>

          <p *ngIf="lista.length === 0" class="sin-puntos">
            Sin puntuaciones en {{ juego }} todavía...
          </p>
        </ng-container>
      </div>
    </ng-container>
  </div>
</div>